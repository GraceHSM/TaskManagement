<%= render 'topbar' %>
<section class="container-fluid">
  <h2 class='mt-3'><%= t('TaskLists') %></h2>
  <form class='d-inline-block mt-3'>
    <%= form_tag(tasks_path, method: 'get', class: 'd-inline-block') do %>
      <%= select_tag(:status, options_for_select([[User.human_attribute_name('pending'),'0'], [User.human_attribute_name('processing'),'1'], [User.human_attribute_name('completed'),'2']]), include_blank: t('choose_status')) %>
      <%= text_field_tag(:title, nil, placeholder: 'Search') %>
      <%= submit_tag("Search") %>
    <% end %>
  </form>
  <table class='table mt-3'>
    <thead>
      <tr>
        <th><%= t('priority') %></th>
        <th><%= t('created_at') %><%= link_to t('created_at_asc'), sort: 'created_at_asc' %><%= link_to t('created_at_desc'), sort: 'created_at_desc' %></th>
        <th><%= t('title') %></th>
        <th><%= t('content') %></th>
        <th><%= t('start_at') %><%= link_to t('start_at_asc'), sort: 'start_at_asc' %><%= link_to t('start_at_desc'), sort: 'start_at_desc' %></th>
        <th><%= t('deadline_at') %><%= link_to t('deadline_at_asc'), sort: 'deadline_at_asc' %><%= link_to t('deadline_at_desc'), sort: 'deadline_at_desc' %></th>
        <th><%= t('status') %></th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <% @tasks.each do |task| %>
      <tr class='list'>
        <td class='priority'><%= task.priority %></td>
        <td class='created_at'><%= task.created_at.to_s(:taskdate) %></td>
        <td class='title'><%= task.title %></td>
        <td class='content'><%= task.content %></td>
        <td class='start_at'><%= task.start_at.to_s(:taskdate) %></td>
        <td class='deadline_at'><%= task.deadline_at.to_s(:taskdate) %></td>
        <td class='status'><%= task.status %></td>
        <td><%= link_to t('edit'), edit_task_path(task) %><%= link_to t('delete'), task_path(task), method: 'DELETE' %></td>
      </tr>
      <% end %>
    </tbody>
  </table>
</section>